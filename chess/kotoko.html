<!doctype html>
<html>
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width,initial-scale=1.0">
  <meta name="author" content="WatUCWatIC">
  <title>Kotoko</title>
  <style>
    body{
      background-color: rgb(19,19,19);
      color: white;
      font-size: 10pt;
    }
    header{
      position: fixed;
      margin:0;
      padding: .5em;
      z-index: 10;
      background-color: rgba(19,19,19,.8);
      border:0;
      border-bottom: 1px solid gray;
      top:0;
      right:0;
      left:0;
    }
    main{
      counter-reset: chap -1;
      padding-top:  1em;
    }
    main article{
      
    }
    main article::before{
      counter-increment: chap;
      content: counter(chap);
      float: left;
      display:  inline-block;
      padding: 0 .5em 0 0;
      font-size: 1.5em;
      font-weight: bold;
    }
    blockquote{
      border-bottom: 1px solid gray;
      padding: 1em;
    }
    blockquote.end{
      border-bottom: 0;
      border-top:  1px solid gray;
    }
    h1,h2,h3,h4,h5,h6{
      display: inline;
      font-size: initial;
    }
  </style>
  </head>
<body>

  <header>
    <select id="input">
      <option selected value="main">Entire Work</option>
    </select>
    <button onclick="getHTML(input.value)">HTML</button>
  </header>

  <main>
    
    <blockquote>
      
      <details open>
        
        <summary><h4>Summary</h4></summary>
      
        The Kingdom of Mora has a well known prophecy: in her time of need, 4 adventurers will be summoned from another world to defeat the Demon King.

        The <b>Hero</b> to unite and lead them forward.<br>
        The <b>Knight</b> to protect them in battle.<br>
        The <b>Mage</b> to offer assistance when they are lost.<br>
        The <b>Priestess</b> to ensure Khyte's blessings will reach them.

        Kotoko always knew Naoki was her hero, but this whole situation is ridiculous. They're just normal Japanese people!
      </details>
    </blockquote>
    
    <article id="ch1">
      
      "Wh-what just-"
      
      Kotoko opened an eye groggily, holding her head. Bright colors flooded her vision, surrounding her like a hurricane.
      
      A soft groan from the side&mdash;she recognized that voice. She tried to facing it, but ended up falling over herself in the process. She laid on the ground, eyes spinning. Maybe she'd just lay here for a little while.

      The familiar voice spoke. "Did I just get&ndash; no way..."
      
      <i>Yuuki-kun...</i>
      
      Kotoko felt a hand on her wrist, offering to lift her up. Thinking it was Yuuki himself, she accepted and slowly crawled to stand up. The room was finally slowing down.
      
      "Welcome, young adventurers," a man said, right in front of her. Oh, it wasn't Yuuki helping her after all. "I apologize for the whiplash. It's unavoidable, I'm afraid."
      
      "Who?" Kotoko asked, taking back her hand and a few steps. She blinked hard to focus.
      
      "Brother!" Yuuki called behind her. Kotoko turned around instantly. There, she saw Naoki, standing straight and strong. She and Yuuki reached him at the same time, each taking an arm for themselves.
      
      "Irie-kun! Are you okay?" From up close, he did look dizzier than usual.
      
      "Brother, this is&ndash;"
      
      "AAAAAAAHH! SHUT IT!"
      
      She and Yuuki jumped at the sudden shout. It was Kinnosuke, who, lucky for him, was just waking up!
      
      "Can't you see others are sleeping?" he stretched as he spoke, slowly sitting up, "Who in their right mind&ndash; Kotoko? What are you doing here!? Irie too...wait. Huh? Where is this?"
      
      "Kinnchan," Kotoko cried, holding on to Naoki.
      
      The man who'd helped Kotoko up took a step forward, holding his hands up in a calming manner. Feeling safe behind Naoki, Kotoko glared at him and pointed.
      
      "You! Who do you think you are kidnapping a kid and three college students!? How dare you!"
      
      The man looked a little guilty, but didn't get a chance to speak.
      
      Yuuki slapped a hand to his face. "Stupid! Don't you realize the kind of situation we're in? Look around you!"
      
      Kotoko puffed up. Why was he angry at <em>her</em>? They were all victims here and the stranger was clearly a criminal!
      
      Naoki spoke. "Where is this?"
      
      The stranger jumped a little, looking around the room, trying to look for the right words. He brought a hand to his chin, awkward.
      
      Kinnosuke took this time to stand up and join the kidnapped group, standing nearby Kotoko. "Everything here looks so fancy," he muttered to himself.
      
      For the first time, Kotoko looked around at the room. It was all very fancy indeed. It wasn't like the Irie's house either. It wasn't just rich, it was grand. The walls were all far away, the ceiling was too tall. For decoration there were old portraits and the wall itself was chiseled to look elegant. Marble white and golden trims, it was like a palace.
      
      "Is this even Japan anymore?" she asked no one in particular.
      
      Next, she noticed the people. It wasn't just the one man. Surrounding them were all sorts of colorful figures. Ball gowns, Christian robes, was that person wearing armor!?
      
      They were too far away to see any distinguishing features, but she was certain none of them were Japanese. As a matter of fact, now that she was looking at him, the man who had helped her up wasn't Japanese either! He was a&mdash;Kotoko admitted reluctantly&mdash;handsome youth who looked of European descent.
      
      <i>He's not more handsome than <em>my</em> Irie-kun</i>, she thought.
      
      He was also wearing a crown, she realized. A prince!?
      
      Yuuki looked around at his own group, looking for something that he did not find in their expressions. "No way, don't you realize where we are?"
      
      "You know this place, Yuuki?" Naoki asked.
      
      "I&ndash; well&ndash; no, but...this is clearly...a...you know..."
      
      "A what?" Kinnosuke asked impatiently. "Don't freeze up now, you never have any problems giving me trouble."
      
      "Don't worry about that, Yuuki-kun" <i>that</i> being Kinnosuke. "What is this clearly?"
      
      Kotoko paled, eyes darting from the crown in front of her, to the high ceilings, to the person wearing armor in the distance. She turned slowly in a circle, finally taking in the floor's appearance.
      
      "This is..."
      
      A magic circle? Like the one's she saw in those magical girl animes when she was a kid (and technically in that manga she read last week that the anime club lent&ndash; no, no, reading manga doesn't count! She's too old for anyone to know she reads manga and she refuses to join the anime club. She refuses she refuses she refuses!)
      
      Yuuki glanced at the prince and the floor to make sure he wasn't being silly. Now he was getting embarrassed. Who in their right mind would jump to that conclusion in the first place? Maybe he was wrong.
      
      "Ah, I think, anyway, that it's an&mdash;" he never finished, as Kotoko, who had read the situation much slower than him, had less qualms about blurting it out.
      
      "AN ISEKAI SITUATION!? NO WAY!"
      
      <hr>
      
      Kotoko possibly fainted. She couldn't remember, but the last thing she remembered was screaming something about manga and feeling simultaneously excited, afraid, and embarrassed.
      
      She only woke up again because dream-Irie-kun had especially small hands today, which was so off! Naoki's hands are big and manly, especially compared to hers!
      
      Shaking herself away, Kotoko looked at her hands, currently being held by dainty fingers. She raised her eyes to look at the owner, finding a rather young girl wearing a Christian nun's outfit. Well, it seemed Christian at first glance, but did those nuns wear all white? Probably, right?
      
      However, instead of the image of a cross, she had on her a circular symbol Kotoko couldn't recognize. The nun was in the middle of a speaking.
      
      "...welcome you to our order! It is truly such an honor to be in your presence Miss Priestess!"
      
      "Huh?" Kotoko blanked.
            
      From the side, Kinnosuke was busy shaking off the hand of a tired man with circles under his eyes and a frighteningly pointy hand.
      
      "I'm telling ya, I don't know no magic! Let go of me, man!"
      
      The shaky man wasn't quite old, but he looked absolutely jaded. Still, he hung on to Kinnosuke for dear life.
      
      "But you said you cook, right? Alchemy is only a more learned version of cooking, it must be a sign! Please, sir Mage, don't deny your nature!"
      
      Turning her head to the other side of her, Kotoko saw Yuuki going through a similar process.
      
      "-young warrior. Look at you, you are clearly in the prime of your life. A youth with such vigor can be no other but the Knight!"
      
      "Me? I mean," Yuuki's momentary frown became a rather arrogant grin. His eyes flickered past Kotoko for a moment. "Well, if you say so."
      
      "Young maiden? Young maiden?" Kotoko was brought back to her own situation with a tug. "Have you recieved any visions from the goddess?"
      
      Kotoko had no idea who that was.
      
      Seeing the blank look on her, the nun shook her head sadly. "It's alright, we haven't recieved any from her for years either." Oh no, was she going to cry? "But I'm sure that if anyone can do it, it's you!" Oh no, was she going to hug Kotoko!?
      
      Before the teary-eyed nun could jump her, Kotoko broke her hand free, turning in a circle to look for Naoki.
      
      "Wait," she exclaimed, "so if Kinnchan is a wizard, Yuuki-kun is a knight, and I'm the priestess...what is Irie-kun?"
      
      How could they not give Naoki the knight role? He was so clearly fit for it! Big, strong, smart. There was nothing more fitting.
      
      "The handsome young man?" the nun asked kindly behind her.
      
      Kotoko felt flattered at once. "Yes, that one," she grinned proudly. "Isn't he so cool? He's really smart, too! He's a true genius."
      
      "Really?" The nun seemed all the more excited, dragged into Kotoko's chatting. "That's perfect! He's been claimed the Hero by his majesty. After all, only the Hero could lead all you adventurers on your journey."
      
      Kotoko's eyes lit up. "The hero!? Really? Where's is Irie-kun?"
      
      Following her Irie-radar, she looked behind the nun, where she'd been blocking the view. There, Naoki stood with the man who had helped Kotoko up. They were talking, though Naoki had a scepticle look on his face. 
      
    </article>
    <blockquote class="end">
      Hehehehe, just a thought I had once. So I guess I wrote it? It's...it's an idea, I swear, just. Wow, ha ha.
    </blockquote>
        
    <aside id="scenes">
      
      <h3>Aside</h3>
      
      "No, no, this is all wrong," Kotoko whimpered to herself, looking at the two men before her. "This isn't right at all, it's no good."
      
      Naoki's gaze landed on her, but for once, Kotoko was distracted by something else. He asked, "What's not right, Kotoko? It's plain to see that nothing's been right for a while now, you need to specify."
      
      "This! All of this!" She splayed her hands, gesturing at the entire group. "It was supposed to be four adventurers, but we've been missing Yuuki-kun since before our journey began! Kinnchan is obviously no good as a Mage, and I haven't recieved even one single vision from Khyte! And-" she cut herself off, shaking her head and drawing into herself. "This doesn't make sense."
      
      Naoki's eye twitched at the unfinished statement. "And what, Kotoko? Finish your sentence."
      
      Her tear-filled eyes flickered up and down. She shook her head.
      
      Kinnosuke swallowed loudly, staring at the small Kotoko. "I think..." he started.
      
      "Do you now?" Naoki muttered. Kotoko's eyes flashed with something, her jaw clenched and unclenched. "You heard her yourself, Mister Failed Mage. You're not suited to think."
      
      "That's not what she said."
      
      "She didn't have to say it, it was implied. You couldn't bring yourself to study a single moment and now we're all suffering for i-"
      
      "STOP IT!"
      
      The group fell into a heavy silence. Even Naoki stilled, hearing Kotoko this desperate for the first time in a long time.
      
      Kotoko breathed a little hard, shoulders trembling after two words. She inhaled, slowly leading the breath back out as she readied herself to speak.
      
      "It's not just Kinnchan who is failing at his role. It's...it's all of us, Irie-kun." Her eyes met his. "Even you."
      
      Naoki raised a brow. "Me?" If anything, he'd been the only thing keeping them alive. They were lucky he knew half the many war tactics he did, that he'd learned the sword so well in Yuuki's absence. "Explain to me, then, what I'm supposed to be doing."
      
      "I don't know!" Kotoko held her hands against her head. She was so stupid and it was finally catching up to her. "But it's not this. The Hero is not supposed to be like this. You're nothing like the heroes in manga, or-or even the hero from the prophecy. Unite us? You only pick fights with Kinnchan, you act cold to me when I'm only trying to help, and even though you miss Yuuki-kun, <em>he's not here</em>."
      
      Kinnosuke's eyes darted from left to right, realizing this was more than a lover's spat or even Kotoko defending him. It was true, he was used to Naoki's retorts, but their time on Mora had been different. It'd been so much worse between being transported to another world, studying without moving forward at all, feeling completely inadequate, and almost dying.
      
      Naoki remained silent, a finger twitched, otherwise still.
      
      "You're supposed to be some sort of diplomat," Kotoko continued, now more to herself, "and I thought it suited you. Your charisma is off the charts, how can people not like you, but I think I realize now..." her eyes met with Naoki's, "I think I realize I was being blinded by love. You aren't diplomatic. You're not likable at all."
      
      Naoki's expression was stiff when he spoke next. "So what are you trying to say, Kotoko?"
      
      <i>You're not the Hero</i>, is what her mind replied in an instant. But she wasn't up to it anymore. She didn't want to keep talking, they were going nowhere anyway.
      
      She felt a gentle hand on her back, another on her shoulder.
      
      Naoki scoffed, turning away from the scene and rolling his eyes. "Spare me," he muttered darkly.
      
      "It's okay, Kotoko," Kinnosuke said in a soft voice. "It's going to be okay. Even if he's being an asshole, we have you to balance it out, just like always. We're going to be fine." 
      
      "How can you be sure?" she asked. Even she wasn't sure, and she was supposed to be the surest of them, because Khyte was supposed to be on her side, but she just wasn't there.
      
    </aside>
    
  </main>
  
  <script>
    'use strict';

    function makeParagraphs(query){
      let el = document.querySelector(query) || document.body;
      if(el.querySelector('article')){
        let chaps = document.querySelectorAll(query + '>*');
        for(let i = 0; i < chaps.length; i++){
          let a = '<p>' + chaps[i].innerHTML.replace(/\n[ ]*\n[ ]*|\r\n[ ]*\r\n[ ]*/g,'</p>\n<p>') + '</p>';
          a = a.replace(/<p><\/p>/g,'');
          chaps[i].innerHTML = a;
        }
      }else{
        let a = '<p>' + el.innerHTML.replace(/\n[ ]*\n[ ]*|\r\n[ ]*\r\n[ ]*/g,'</p>\n<p>') + '</p>';
        a = a.replace(/<p><\/p>/g,'');
        el.innerHTML = a;
      }
    }

    function getHTML(query){
      let el = document.querySelector(query) || document.body;
      let a = el.innerHTML;
      el.textContent = a;
    }
    
    function wordCount(query) {
      let str = document.querySelector(query).innerText;
      return str.trim().split(/\s+|—/).length;
    }

    makeParagraphs('main');
    
    var input = document.querySelector('#input');
    var chaps = document.querySelectorAll('main > article');
    var secs = document.querySelectorAll('main > *');
    var main = document.querySelector('main');
    
    input.addEventListener('keydown',function(e){
      if(e.key === 'Enter'){
        let btn = document.querySelector('[onclick="getHTML(input.value)"]');
        btn.focus();
        btn.click();
      }
    });
    
    for(let i=0; i<chaps.length; i++) {
      input.innerHTML = input.innerHTML + `<option value="#ch${i+1}">Chapter ${i+1}</option>`;
    }
    
    main.innerHTML = main.innerHTML.replace(/<p><\/p>/g, '');

  </script>
</body>
</html>
